langcode: en
status: true
dependencies:
  enforced:
    module:
      - localgov_outpost
id: localgov_outpost_services
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - outpost
  - services
migration_group: localgov_outpost
label: 'Outpost Services'
source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  urls:
    - https://greenwich-outpost-api-staging.herokuapp.com/api/v1/services
  item_selector: locations
  fields:
    -
      name: id
      label: 'Outpost Service ID'
      selector: id
    -
      name: name
      label: 'Service name'
      selector: name
process:
  type:
    plugin: default_value
    default_value: localgov_outpost_entry
  uid:
    plugin: default_value
    default_value: 1
  sticky:
    plugin: default_value
    default_value: 0
  localgov_directory_channels:
    plugin: default_value
    default_value: 1068
  created: start_timestamp
  changed: modified_timestamp
  title: name
  body: description
  localgov_outpost_type: type
  localgov_outpost_email: email
  localgov_outpost_mobile: mobile
  localgov_outpost_telephone: tel
  localgov_outpost_website: website
  localgov_outpost_publication_url: publicationurl
  localgov_outpost_ofsted_report/uri: Ofsted_ReportURL
  localgov_outpost_ofsted_report/title: Ofsted_UR
  localgov_outpost_funded_places: funded_places
  localgov_outpost_cost_hour: cost_hour
  localgov_outpost_cost_day: cost_day
  localgov_outpost_cost_session: cost_session
  localgov_outpost_cost_week: cost_week
  localgov_outpost_cost_term: cost_term
  localgov_outpost_languages: languages
  localgov_outpost_sen_area: sen_area
  localgov_outpost_school_pickup_names: school_pickup_names
  localgov_outpost_school_pickup_json: school_pickup
  localgov_outpost_session_times_json: session_times
  localgov_outpost_category:
    -
      plugin: migration_lookup
      migration: localgov_outpost_category
      source: categories
  localgov_location:
    -
      plugin: migration_lookup
      migration: localgov_outpost_locations
      source:
        - Address_Postcode
        - Address_1
destination:
  plugin: 'entity:node'
migration_dependencies:
  required:
    - localgov_outpost_category
    - localgov_outpost_locations
